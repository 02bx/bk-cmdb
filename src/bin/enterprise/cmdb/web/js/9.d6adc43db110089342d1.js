webpackJsonp([9],{"13H/":function(t,e,i){"use strict";var s=i("woOf"),o=i.n(s),n=i("mvHQ"),a=i.n(n),r=i("Dd8w"),c=i.n(r),l=i("Qt9A"),d=i("T0tT"),p=i("d0Hl"),u=i("rfIK"),h=i("NYxO");e.a={data:function(){return{filing:{isShow:!1},index:{bkBizId:"",selectedHost:[],searchParams:{bk_biz_id:-1,condition:[{bk_obj_id:"biz",fields:[],condition:[{field:"default",operator:"$eq",value:1}]},{bk_obj_id:"host",fields:[],condition:[]},{bk_obj_id:"module",fields:[],condition:[]},{bk_obj_id:"set",fields:[],condition:[]}]},table:{header:[],allAttr:[]}},slider:{title:{text:this.$t("HostResourcePool['导入主机']"),icon:"icon-cc-import"},isShow:!1,tab:{active:"import"},import:{templateUrl:window.siteUrl+"importtemplate/host",importUrl:window.siteUrl+"hosts/import"}},isShowimportHost:!1}},computed:c()({},Object(h.c)(["bkBizList","bkSupplierAccount","language"]),{hasSelectedHost:function(){return this.index.selectedHost.length},exportUrl:function(){return window.siteUrl+"hosts/export"}}),watch:{"slider.isShow":function(t){t||(this.slider.tab.active="import")}},methods:c()({},Object(h.b)(["getBkBizList"]),{tabChanged:function(t){this.slider.tab.active=t},confirmTransfer:function(t,e){var i=this,s=this.$createElement,o="";o="en"===this.language?s("p",[s("span","Selected "),s("span",{style:{color:"#3c96ff"}},this.index.selectedHost.length),s("span"," Hosts Transfer to Idle machine under "),s("span",{style:{color:"#3c96ff"}},t.label)]):s("p",[s("span","选中的 "),s("span",{style:{color:"#3c96ff"}},this.index.selectedHost.length),s("span"," 个主机转移到 "),s("span",{style:{color:"#3c96ff"}},t.label),s("span"," 下的空闲机模块")]),this.$bkInfo({title:this.$t("HostResourcePool['请确认是否转移']"),content:o,confirmFn:function(){i.transferHost()}})},transferHost:function(){var t=this;this.$axios.post("hosts/modules/resource/idle",{bk_biz_id:this.index.bkBizId,bk_host_id:this.index.selectedHost}).then(function(e){e.result?(t.$alertMsg(t.$t("HostResourcePool['分配成功']"),"success"),t.index.selectedHost=[],t.$refs.index.transferSuccess(),t.index.bkBizId="",t.search()):t.$alertMsg(e.bk_error_msg)})},confirmDel:function(){var t=this;this.$bkInfo({title:this.$t("HostResourcePool['确定删除选中的主机']")+"？",confirmFn:function(){t.$axios.delete("hosts/batch",{data:a()({bk_host_id:t.index.selectedHost.join(","),bk_supplier_account:t.bkSupplierAccount})}).then(function(e){e.result?(t.$bkInfo({statusOpts:{title:t.$t("HostResourcePool['成功删除选中的主机']"),subtitle:!1},type:"success"}),t.search(),t.$refs.index.clearChooseId()):t.$alertMsg(e.bk_error_msg)})}})},search:function(){this.index.searchParams=o()({},this.index.searchParams)},setSelectedHost:function(t){this.index.selectedHost=t},exportChoose:function(){this.$refs.exportForm.submit()},importHostShow:function(){this.slider.isShow=!0},openAgentApp:function(){var t=window.agentAppUrl;t?-1!==window.agentAppUrl.indexOf("paasee-g.o.qcloud.com")?window.top.postMessage(a()({action:"open_other_app",app_code:"bk_agent_setup"}),"*"):window.open(t):this.$alertMsg(this.$t("HostResourcePool['未配置Agent安装APP地址']"))},showFiling:function(){this.index.table.header=this.$refs.index.table.tableHeader,this.index.table.allAttr=this.$refs.index.attribute,this.filing.isShow=!0}}),created:function(){this.bkBizList.length||this.getBkBizList()},components:{vImport:d.a,vIndex:l.default,vSideslider:p.a,vDeleteHistory:u.a}}},BVd4:function(t,e,i){var s=i("e1Ch");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("2635f0ba",s,!0,{})},EF8o:function(t,e,i){"use strict";function s(t){i("BVd4")}Object.defineProperty(e,"__esModule",{value:!0});var o=i("13H/"),n=i("gETS"),a=i("VU/8"),r=s,c=a(o.a,n.a,!1,r,"data-v-3943d866",null);e.default=c.exports},e1Ch:function(t,e,i){e=t.exports=i("FZ+f")(!0),e.push([t.i,".host-resource-wrapper[data-v-3943d866]{position:relative;height:100%}.biz-selector[data-v-3943d866]{display:inline-block;vertical-align:middle;width:200px}.icon-cc-history[data-v-3943d866]{font-size:16px}.del-button[data-v-3943d866]{width:36px;padding:0}.del-button:hover .icon-cc-del[data-v-3943d866]{color:#ef4c4c}.automatic-import[data-v-3943d866]{padding:40px 30px 0}.automatic-import .back-contain[data-v-3943d866]{cursor:pointer;color:#3c96ff}.automatic-import .back-contain img[data-v-3943d866]{margin-right:5px}.automatic-import .back-contain a[data-v-3943d866]{color:#3c96ff}","",{version:3,sources:["E:/bk-cmdb/src/ui/src/pages/resource/resource.vue"],names:[],mappings:"AAoBA,wCACE,kBAAmB,AACnB,WAAa,CACd,AACD,+BACE,qBAAsB,AACtB,sBAAuB,AACvB,WAAa,CACd,AACD,kCACE,cAAgB,CACjB,AACD,6BACE,WAAY,AACZ,SAAW,CACZ,AACD,gDACI,aAAe,CAClB,AACD,mCACE,mBAA0B,CAC3B,AACD,iDACI,eAAgB,AAChB,aAAe,CAClB,AACD,qDACM,gBAAkB,CACvB,AACD,mDACM,aAAe,CACpB",file:"resource.vue",sourcesContent:['\n@charset "UTF-8";\n/*\r\n * Tencent is pleased to support the open source community by making 蓝鲸 available.\r\n * Copyright (C) 2017-2018 THL A29 Limited, a Tencent company. All rights reserved.\r\n * Licensed under the MIT License (the "License"); you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at http://opensource.org/licenses/MIT\r\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and limitations under the License.\r\n */\n/*\r\n * Tencent is pleased to support the open source community by making 蓝鲸 available.\r\n * Copyright (C) 2017-2018 THL A29 Limited, a Tencent company. All rights reserved.\r\n * Licensed under the MIT License (the "License"); you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at http://opensource.org/licenses/MIT\r\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and limitations under the License.\r\n */\n.host-resource-wrapper[data-v-3943d866] {\n  position: relative;\n  height: 100%;\n}\n.biz-selector[data-v-3943d866] {\n  display: inline-block;\n  vertical-align: middle;\n  width: 200px;\n}\n.icon-cc-history[data-v-3943d866] {\n  font-size: 16px;\n}\n.del-button[data-v-3943d866] {\n  width: 36px;\n  padding: 0;\n}\n.del-button:hover .icon-cc-del[data-v-3943d866] {\n    color: #ef4c4c;\n}\n.automatic-import[data-v-3943d866] {\n  padding: 40px 30px 0 30px;\n}\n.automatic-import .back-contain[data-v-3943d866] {\n    cursor: pointer;\n    color: #3c96ff;\n}\n.automatic-import .back-contain img[data-v-3943d866] {\n      margin-right: 5px;\n}\n.automatic-import .back-contain a[data-v-3943d866] {\n      color: #3c96ff;\n}\n'],sourceRoot:""}])},gETS:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"host-resource-wrapper"},[i("v-index",{ref:"index",attrs:{isShowBiz:!1,isShowCollect:!1,isShowHistory:!1,outerParams:t.index.searchParams},on:{choose:t.setSelectedHost,attrLoaded:t.search}},[i("div",{staticClass:"button-contain clearfix",attrs:{slot:"btnGroup"},slot:"btnGroup"},[i("bk-select",{staticClass:"biz-selector fl mr10",attrs:{placeholder:t.$t("HostResourcePool['分配到业务空闲机池']"),disabled:!t.hasSelectedHost,selected:t.index.bkBizId,filterable:!0},on:{"update:selected":function(e){t.$set(t.index,"bkBizId",e)},"on-selected":t.confirmTransfer}},t._l(t.bkBizList,function(t,e){return i("bk-select-option",{key:e,attrs:{value:t.bk_biz_id,label:t.bk_biz_name}})})),t._v(" "),i("form",{ref:"exportForm",staticClass:"fl mr10",attrs:{action:t.exportUrl,method:"POST"}},[i("input",{attrs:{type:"hidden",name:"bk_host_id"},domProps:{value:t.index.selectedHost}}),t._v(" "),i("input",{attrs:{type:"hidden",name:"bk_biz_id",value:"-1"}}),t._v(" "),i("button",{staticClass:"bk-button",attrs:{disabled:!t.hasSelectedHost},on:{click:function(e){return e.preventDefault(),t.exportChoose(e)}}},[i("i",{staticClass:"icon-cc-derivation"}),t._v(" "),i("span",[t._v(t._s(t.$t("HostResourcePool['导出选中']")))])])]),t._v(" "),i("button",{staticClass:"bk-button del-button fl mr10",attrs:{disabled:!t.hasSelectedHost},on:{click:t.confirmDel}},[i("i",{staticClass:"icon-cc-del"})]),t._v(" "),i("div",{staticClass:"fr"},[i("bk-button",{staticClass:"fl",attrs:{type:"primary"},on:{click:t.importHostShow}},[t._v(t._s(t.$t("HostResourcePool['导入主机']")))]),t._v(" "),i("button",{staticClass:"bk-button del-button fl ml10",attrs:{title:t.$t("Common['查看删除历史']")},on:{click:t.showFiling}},[i("i",{staticClass:"icon-cc-history"})])],1)],1)]),t._v(" "),i("v-sideslider",{attrs:{title:t.slider.title,isShow:t.slider.isShow},on:{"update:isShow":function(e){t.$set(t.slider,"isShow",e)}}},[i("bk-tab",{staticStyle:{border:"none",padding:"0 20px"},attrs:{slot:"content","active-name":t.slider.tab.active},on:{"tab-changed":t.tabChanged},slot:"content"},[i("bk-tabpanel",{attrs:{name:"import",title:t.$t("HostResourcePool['批量导入']")}},[i("v-import",{attrs:{templateUrl:t.slider.import.templateUrl,importUrl:t.slider.import.importUrl},on:{success:function(e){t.search()},partialSuccess:function(e){t.search()}}},[i("span",{staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{slot:"download-desc"},slot:"download-desc"},[t._v(t._s(t.$t("HostResourcePool['说明：内网IP为必填列']")))])])],1),t._v(" "),i("bk-tabpanel",{attrs:{name:"agent",title:t.$t("HostResourcePool['自动导入']")}},[i("div",{staticClass:"automatic-import"},[i("p",[t._v(t._s(t.$t("HostResourcePool['agent安装说明']")))]),t._v(" "),i("div",{staticClass:"back-contain"},[i("i",{staticClass:"icon-cc-skip"}),t._v(" "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:t.openAgentApp}},[t._v(t._s(t.$t("HostResourcePool['点此进入Agent安装APP']")))])])])])],1)],1),t._v(" "),i("v-delete-history",{attrs:{isShow:t.filing.isShow,objId:"host",objTableHeader:t.index.table.header},on:{"update:isShow":function(e){t.$set(t.filing,"isShow",e)}}})],1)},o=[],n={render:s,staticRenderFns:o};e.a=n}});
//# sourceMappingURL=9.d6adc43db110089342d1.js.map