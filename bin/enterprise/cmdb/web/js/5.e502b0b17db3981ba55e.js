webpackJsonp([5],{"1QrL":function(e,t,s){e.exports=s.p+"img/user-none.46cb240.png"},"8o4g":function(e,t){},HGbh:function(e,t){},"P2j+":function(e,t){},V9V6:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("woOf"),r=s.n(i),o=s("Xxa5"),a=s.n(o),n=s("exGp"),c=s.n(n),l=s("Dd8w"),u=s.n(l),d=s("NYxO"),h={props:{data:{type:Object,required:!1,default:function(){return{group_name:"",group_id:"",supplier_account:"",user_list:"",PaasUserList:""}}},type:{type:String,required:!0}},data:function(){return{isShow:!0}},computed:{title:function(){return"create"===this.type?this.$t('Permission["新增角色"]'):this.$t('Permission["编辑角色"]')},params:function(){var e={group_name:this.data.group_name,user_list:this.data.user_list.split(",").join(";")};return e}},methods:u()({},Object(d.b)("userPrivilege",["createUserGroup","updateUserGroup"]),{submitRoleForm:function(){"create"===this.type?this.createRole():this.updateRole()},createRole:function(){var e=this;return c()(a.a.mark(function t(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createUserGroup({params:e.params,config:{requestId:"saveRole"}});case 2:s=t.sent,e.$success(e.$t('Permission["新建角色成功"]')),e.$emit("on-success",s);case 5:case"end":return t.stop()}},t,e)}))()},updateRole:function(){var e=this;return c()(a.a.mark(function t(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateUserGroup({bkGroupId:e.data.group_id,params:e.params,config:{requestId:"saveRole"}});case 2:s=t.sent,e.$success(e.$t('Permission["更新角色成功"]')),e.$emit("on-success",s);case 5:case"end":return t.stop()}},t,e)}))()},closeRoleForm:function(){var e=this;this.isShow=!1,setTimeout(function(){e.$emit("closeRoleForm")},300)}})},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("bk-dialog",{attrs:{"is-show":e.isShow,"has-header":!1,"has-footer":!1,"quick-close":!1,width:565,padding:0},on:{"update:isShow":function(t){e.isShow=t}}},[s("form",{staticClass:"role-form",attrs:{slot:"content"},slot:"content"},[s("h2",{staticClass:"role-form-title"},[e._v(e._s(e.title))]),e._v(" "),s("div",{staticClass:"role-form-content"},[s("div",{staticClass:"content-group clearfix"},[s("label",{staticClass:"fl",attrs:{for:"groupName"}},[e._v(e._s(e.$t('Permission["角色名"]')))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.group_name,expression:"data['group_name']",modifiers:{trim:!0}}],staticClass:"bk-form-input fl",attrs:{type:"text",id:"groupName"},domProps:{value:e.data.group_name},on:{input:function(t){t.target.composing||e.$set(e.data,"group_name",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),s("div",{staticClass:"content-group clearfix"},[s("label",{staticClass:"fl",attrs:{for:"userList"}},[e._v(e._s(e.$t('Permission["角色成员"]')))]),e._v(" "),s("cmdb-form-objuser",{staticClass:"fl member-selector",attrs:{multiple:!0},model:{value:e.data.user_list,callback:function(t){e.$set(e.data,"user_list",t)},expression:"data['user_list']"}})],1)]),e._v(" "),s("div",{staticClass:"role-form-btn"},[s("div",{staticClass:"fr"},[s("bk-button",{staticClass:"form-btn",attrs:{loading:e.$loading("saveRole"),type:"primary",disabled:!e.data.group_name||!e.data.user_list},on:{click:function(t){return t.preventDefault(),e.submitRoleForm(t)}}},[e._v(e._s(e.$t('Common["确定"]')))]),e._v(" "),s("bk-button",{staticClass:"form-btn vice-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.closeRoleForm(t)}}},[e._v(e._s(e.$t('Common["取消"]')))])],1)])])])},staticRenderFns:[]};var p=s("VU/8")(h,m,!1,function(e){s("pOkE")},"data-v-386d6a0e",null).exports,f={data:function(){return{filter:{group_name:"",user_list:""},deleteInfo:{isShow:!1,content:"",role:null},table:{header:[{id:"group_name",name:this.$t('Permission["角色名"]')},{id:"user_list",name:this.$t('Permission["角色成员"]')},{id:"operation",name:this.$t('Permission["操作"]'),attr:{align:"center"}}],list:[]},form:{isShow:!1,type:"create",data:{group_id:"",group_name:"",user_list:"",PaasUserList:""}}}},methods:u()({},Object(d.b)("userPrivilege",["searchUserGroup","deleteUserGroup"]),Object(d.d)("userPrivilege",["setRoles"]),{skipToUser:function(e){this.$emit("skipToUser",e.group_id)},handleCreateSuccess:function(){var e=this;this.filter.group_name="",this.filter.user_list="",this.$nextTick(function(){e.getRoleList()})},confirmDeleteRole:function(e){this.deleteInfo.content=this.$tc('Permission["确认删除角色"]',e.group_name,{name:e.group_name}),this.deleteInfo.role=e,this.deleteInfo.isShow=!0},deleteRole:function(e){var t=this;return c()(a.a.mark(function s(){return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.deleteUserGroup({bkGroupId:e.group_id});case 2:t.$success(t.$t('Permission["删除成功"]')),t.getRoleList();case 4:case"end":return s.stop()}},s,t)}))()},cancelDeleteRole:function(){this.deleteInfo.isShow=!1},editRole:function(e){this.form.data=r()({},e,{user_list:e.user_list.split(";").join(",")}),this.form.type="edit",this.form.isShow=!0},createRole:function(){this.form.data={group_id:"",group_name:"",user_list:"",PaasUserList:""},this.form.type="create",this.form.isShow=!0},getRoleList:function(){var e=this;return c()(a.a.mark(function t(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchUserGroup({params:e.filter,config:{requestId:"searchUserGroup"}});case 2:s=t.sent,e.table.list=s&&s.length?s:[],e.setRoles(e.table.list);case 5:case"end":return t.stop()}},t,e)}))()}}),created:function(){this.getRoleList()},components:{vRoleForm:p}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"role-wrapper"},[s("div",{staticClass:"role-options clearfix"},[s("div",{staticClass:"role-options-search fl clearfix"},[s("div",{staticClass:"search-group fl"},[s("label",{attrs:{for:"searchGroupName"}},[e._v(e._s(e.$t('Permission["角色名搜索"]')))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.filter.group_name,expression:"filter['group_name']",modifiers:{trim:!0}}],staticClass:"bk-form-input",attrs:{type:"text",id:"searchGroupName"},domProps:{value:e.filter.group_name},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getRoleList(t):null},input:function(t){t.target.composing||e.$set(e.filter,"group_name",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),s("div",{staticClass:"search-group fl"},[s("label",{attrs:{for:"SearchUserName"}},[e._v(e._s(e.$t('Permission["成员搜索"]')))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.filter.user_list,expression:"filter['user_list']",modifiers:{trim:!0}}],staticClass:"bk-form-input",attrs:{type:"text",id:"SearchUserName"},domProps:{value:e.filter.user_list},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getRoleList(t):null},input:function(t){t.target.composing||e.$set(e.filter,"user_list",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("div",{staticClass:"role-options-create fr"},[s("bk-button",{attrs:{type:"primary"},on:{click:e.createRole}},[e._v("\n                "+e._s(e.$t('Permission["新增角色"]'))+"\n            ")])],1)]),e._v(" "),s("cmdb-table",{staticClass:"role-table",attrs:{sortable:!1,loading:e.$loading("searchUserGroup"),header:e.table.header,list:e.table.list,wrapperMinusHeight:240},scopedSlots:e._u([{key:"operation",fn:function(t){var i=t.item;return[s("span",{staticClass:"text-primary",on:{click:function(t){e.skipToUser(i)}}},[e._v(e._s(e.$t('Permission["跳转配置"]')))]),e._v(" "),s("span",{staticClass:"text-primary",on:{click:function(t){t.stopPropagation(),e.editRole(i)}}},[e._v(e._s(e.$t('Common["编辑"]')))]),e._v(" "),s("span",{staticClass:"text-danger",on:{click:function(t){t.stopPropagation(),e.confirmDeleteRole(i)}}},[e._v(e._s(e.$t('Common["删除"]')))])]}}])}),e._v(" "),e.form.isShow?s("v-role-form",{attrs:{data:e.form.data,type:e.form.type},on:{"on-success":e.handleCreateSuccess,closeRoleForm:function(t){e.form.isShow=!1}}}):e._e(),e._v(" "),s("bk-dialog",{attrs:{"has-header":!1,"is-show":e.deleteInfo.isShow,content:e.deleteInfo.content},on:{confirm:function(t){e.deleteRole(e.deleteInfo.role)},cancel:e.cancelDeleteRole}})],1)},staticRenderFns:[]};var v=s("VU/8")(f,_,!1,function(e){s("8o4g")},"data-v-d2617cf6",null).exports,b={props:{groupId:{type:String}},data:function(){return{localRoles:{list:[],selected:""},sysConfig:{global_busi:{id:"global_busi",name:'Permission["全局业务"]',authorities:[{id:"resource",name:'Permission["资源池管理"]'}],selectedAuthorities:[]},back_config:{id:"back_config",name:'Permission["后台配置"]',authorities:[{id:"event",name:'Permission["事件推送配置"]'},{id:"audit",name:'OperationAudit["操作审计"]'}],selectedAuthorities:[]}},classifications:[],groupAuthorities:{},hideClassify:["bk_host_manage","bk_biz_topo"]}},computed:u()({},Object(d.c)("userPrivilege",["roles"]),{updateParams:function(){var e={};for(var t in this.sysConfig)this.sysConfig[t].selectedAuthorities.length&&(e.sys_config=e.sys_config||{},e.sys_config[t]=this.sysConfig[t].selectedAuthorities);return this.classifications.map(function(t){t.models.map(function(s){s.selectedAuthorities.length&&(e.model_config=e.model_config||{},e.model_config[t.id]=e.model_config[t.id]||{},e.model_config[t.id][s.bk_obj_id]=s.selectedAuthorities)})}),e}}),watch:{"localRoles.selected":function(e){e&&this.getGroupAuthorities(e)}},methods:u()({},Object(d.b)("userPrivilege",["searchUserPrivilege","updateGroupPrivilege"]),{changeTab:function(){this.$emit("createRole")},updateGroupAuthorities:function(){this.updateGroupPrivilege({bkGroupId:this.localRoles.selected,params:this.updateParams,config:{requestId:"updateGroupAuthorities"}})},checkAllModelAuthorities:function(e,t,s){var i=this.classifications[e].models[t];s.target.checked?i.selectedAuthorities=["search","update","delete"]:i.selectedAuthorities=[]},getGroupAuthorities:function(e){var t=this;return c()(a.a.mark(function s(){var i;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.searchUserPrivilege({bkGroupId:e});case 2:i=s.sent,t.groupAuthorities=i.privilege,t.initSystemAuthorities(),t.initClassifications();case 6:case"end":return s.stop()}},s,t)}))()},calcModelListStyle:function(e){return{height:42*e-10+"px"}},checkOtherAuthorities:function(e,t,s){var i=this.classifications[e].models[t];s.target.checked||(i.selectedAuthorities=[])},initSystemAuthorities:function(){if(this.groupAuthorities.hasOwnProperty("sys_config"))for(var e in this.sysConfig)this.groupAuthorities.sys_config.hasOwnProperty(e)?this.sysConfig[e].selectedAuthorities=this.groupAuthorities.sys_config[e]||[]:this.sysConfig[e].selectedAuthorities=[];else for(var t in this.sysConfig)this.sysConfig[t].selectedAuthorities=[]},initClassifications:function(){var e=this,t=[],s=this.$classifications.map(function(e){var t=u()({},e);return t.bk_objects=t.bk_objects.filter(function(e){return!e.bk_ispaused}),t});s=s.filter(function(t){var s=t.bk_classification_id,i=t.bk_objects;return!e.hideClassify.includes(s)&&Array.isArray(i)&&i.length});var i=this.groupAuthorities;s.map(function(s){var o=[],a=s.bk_classification_id;-1===e.hideClassify.indexOf(a)&&(s.bk_objects.forEach(function(e){var t=[];i.hasOwnProperty("model_config")&&i.model_config.hasOwnProperty(a)&&i.model_config[a].hasOwnProperty(e.bk_obj_id)&&(t=i.model_config[a][e.bk_obj_id]),o.push(r()({},e,{selectedAuthorities:t}))}),t.push({id:s.bk_classification_id,name:s.bk_classification_name,open:!0,models:o}))}),this.classifications=t},initRoles:function(){this.localRoles.list=this.roles.map(function(e){return r()(e,{id:e.group_id,name:e.group_name})}),this.localRoles.list.length?this.localRoles.selected=""===this.groupId?this.localRoles.list[0].id:this.groupId:this.localRoles.selected=""}}),created:function(){this.initRoles()}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"authority-wrapper"},[e.roles.length?[i("div",{staticClass:"authority-group clearfix"},[i("h2",{staticClass:"authority-group-title fl"},[e._v(e._s(e.$t('Permission["角色选择"]')))]),e._v(" "),i("bk-selector",{staticClass:"role-selector fl",attrs:{list:e.localRoles.list,selected:e.localRoles.selected,searchable:!0},on:{"update:selected":function(t){e.$set(e.localRoles,"selected",t)}}})],1),e._v(" "),i("div",{staticClass:"authority-group clearfix"},[i("h2",{staticClass:"authority-group-title fl"},[e._v(e._s(e.$t('Permission["系统相关"]')))]),e._v(" "),i("div",{staticClass:"authority-group-content"},e._l(e.sysConfig,function(t,s){return t.authorities.length?i("div",{staticClass:"authority-type system clearfix"},[i("h3",{staticClass:"system-title fl"},[e._v(e._s(e.$t(t.name)))]),e._v(" "),i("ul",{staticClass:"system-list fl"},e._l(t.authorities,function(s){return i("li",{staticClass:"system-item fl"},[i("label",{staticClass:"bk-form-checkbox bk-checkbox-small",attrs:{for:"systemAuth-"+s.id,title:e.$t(s.name)}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedAuthorities,expression:"config.selectedAuthorities"}],attrs:{type:"checkbox",id:"systemAuth-"+s.id},domProps:{value:s.id,checked:Array.isArray(t.selectedAuthorities)?e._i(t.selectedAuthorities,s.id)>-1:t.selectedAuthorities},on:{change:function(i){var r=t.selectedAuthorities,o=i.target,a=!!o.checked;if(Array.isArray(r)){var n=s.id,c=e._i(r,n);o.checked?c<0&&e.$set(t,"selectedAuthorities",r.concat([n])):c>-1&&e.$set(t,"selectedAuthorities",r.slice(0,c).concat(r.slice(c+1)))}else e.$set(t,"selectedAuthorities",a)}}}),e._v(e._s(e.$t(s.name))+"\n                            ")])])}))]):e._e()}))]),e._v(" "),i("div",{staticClass:"authority-group model clearfix"},[i("h2",{staticClass:"authority-group-title"},[i("span",[e._v(e._s(e.$t('Permission["模型相关"]')))])]),e._v(" "),i("div",{staticClass:"authority-group-content"},e._l(e.classifications,function(t,s){return t.models.length?i("div",{staticClass:"authority-type model"},[i("h3",{staticClass:"classify-name clearfix",attrs:{title:t.name},on:{click:function(e){t.open=!t.open}}},[i("span",{staticClass:"fl"},[e._v(e._s(t.name))]),e._v(" "),i("i",{staticClass:"bk-icon icon-angle-down angle fr",class:{open:t.open}})]),e._v(" "),i("transition",{attrs:{name:"slide"}},[i("ul",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"classify.open"}],staticClass:"model-list",style:e.calcModelListStyle(t.models.length)},e._l(t.models,function(t,r){return i("li",{staticClass:"model-item clearfix"},[i("h4",{staticClass:"model-authority fl",attrs:{title:t.bk_obj_name}},[e._v(e._s(t.bk_obj_name))]),e._v(" "),i("span",{staticClass:"model-authority-checkbox fl"},[i("label",{staticClass:"bk-form-checkbox bk-checkbox-small",attrs:{for:"model-all-"+t.bk_obj_id}},[i("input",{attrs:{type:"checkbox",id:"model-all-"+t.bk_obj_id},domProps:{checked:3===t.selectedAuthorities.length},on:{change:function(t){e.checkAllModelAuthorities(s,r,t)}}}),e._v(e._s(e.$t('Common["全选"]'))+"\n                                    ")])]),e._v(" "),i("span",{staticClass:"model-authority-checkbox fl"},[i("label",{staticClass:"bk-form-checkbox bk-checkbox-small",attrs:{for:"model-search-"+t.bk_obj_id}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedAuthorities,expression:"model.selectedAuthorities"}],attrs:{type:"checkbox",value:"search",id:"model-search-"+t.bk_obj_id},domProps:{checked:Array.isArray(t.selectedAuthorities)?e._i(t.selectedAuthorities,"search")>-1:t.selectedAuthorities},on:{change:[function(s){var i=t.selectedAuthorities,r=s.target,o=!!r.checked;if(Array.isArray(i)){var a=e._i(i,"search");r.checked?a<0&&e.$set(t,"selectedAuthorities",i.concat(["search"])):a>-1&&e.$set(t,"selectedAuthorities",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(t,"selectedAuthorities",o)},function(t){e.checkOtherAuthorities(s,r,t)}]}}),e._v(e._s(e.$t('Common["查询"]'))+"\n                                    ")])]),e._v(" "),i("span",{staticClass:"model-authority-checkbox fl"},[i("label",{staticClass:"bk-form-checkbox bk-checkbox-small",class:{disabled:-1===t.selectedAuthorities.indexOf("search")},attrs:{for:"model-update-"+t.bk_obj_id}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedAuthorities,expression:"model.selectedAuthorities"}],attrs:{type:"checkbox",value:"update",id:"model-update-"+t.bk_obj_id,disabled:-1===t.selectedAuthorities.indexOf("search")},domProps:{checked:Array.isArray(t.selectedAuthorities)?e._i(t.selectedAuthorities,"update")>-1:t.selectedAuthorities},on:{change:function(s){var i=t.selectedAuthorities,r=s.target,o=!!r.checked;if(Array.isArray(i)){var a=e._i(i,"update");r.checked?a<0&&e.$set(t,"selectedAuthorities",i.concat(["update"])):a>-1&&e.$set(t,"selectedAuthorities",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(t,"selectedAuthorities",o)}}}),e._v(e._s(e.$t('Common["编辑"]'))+"\n                                    ")])]),e._v(" "),i("span",{staticClass:"model-authority-checkbox fl"},[i("label",{staticClass:"bk-form-checkbox bk-checkbox-small",class:{disabled:-1===t.selectedAuthorities.indexOf("search")},attrs:{for:"model-delete-"+t.bk_obj_id}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedAuthorities,expression:"model.selectedAuthorities"}],attrs:{type:"checkbox",value:"delete",id:"model-delete-"+t.bk_obj_id,disabled:-1===t.selectedAuthorities.indexOf("search")},domProps:{checked:Array.isArray(t.selectedAuthorities)?e._i(t.selectedAuthorities,"delete")>-1:t.selectedAuthorities},on:{change:function(s){var i=t.selectedAuthorities,r=s.target,o=!!r.checked;if(Array.isArray(i)){var a=e._i(i,"delete");r.checked?a<0&&e.$set(t,"selectedAuthorities",i.concat(["delete"])):a>-1&&e.$set(t,"selectedAuthorities",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(t,"selectedAuthorities",o)}}}),e._v(e._s(e.$t('Common["删除"]'))+"\n                                    ")])])])}))])],1):e._e()}))]),e._v(" "),i("footer",{staticClass:"footer"},[i("bk-button",{attrs:{type:"primary",loading:e.$loading("updateGroupAuthorities")},on:{click:e.updateGroupAuthorities}},[e._v("\n                "+e._s(e.$t('Common["保存"]'))+"\n            ")])],1)]:[i("div",{staticClass:"user-none"},[i("img",{attrs:{src:s("1QrL"),alt:e.$t("Permission['没有创建角色']")}}),e._v(" "),i("p",{staticClass:"mt20"},[e._v("\n                "+e._s(e.$t('Permission["没有创建角色"]'))+"\n                "),i("span",{staticClass:"btn",on:{click:e.changeTab}},[e._v(e._s(e.$t('Permission["点击新增"]')))])])])]],2)},staticRenderFns:[]};var k=s("VU/8")(b,g,!1,function(e){s("HGbh")},"data-v-7e32ddeb",null).exports,y={data:function(){return{selectedBusinessRole:"",businessRoles:[],authorities:{list:[{id:"hostupdate",name:'Permission["主机编辑"]'},{id:"hosttrans",name:'Permission["主机转移"]'},{id:"topoupdate",name:'Permission["拓扑编辑"]'},{id:"customapi",name:'Permission["自定义查询"]'},{id:"proconfig",name:'Permission["进程管理"]'}],selected:[]}}},computed:{isMaintainers:function(){return"bk_biz_maintainer"===this.selectedBusinessRole}},watch:{isMaintainers:function(e){e&&(this.authorities.selected=this.authorities.list.map(function(e){return e.id}))},selectedBusinessRole:function(){this.getBusinessRoleAuthorities()}},methods:u()({},Object(d.b)("userPrivilege",["getRolePrivilege","bindRolePrivilege"]),Object(d.b)("objectModelProperty",["searchObjectAttribute"]),{getBusinessRoles:function(){var e=this;return c()(a.a.mark(function t(){var s,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchObjectAttribute({params:{bk_obj_id:"biz"},config:{fromCache:!0}});case 2:s=t.sent,i=[],s.map(function(e){"objuser"===e.bk_property_type&&i.push({id:e.bk_property_id,name:e.bk_property_name,selectedAuthorities:[]})}),e.businessRoles=i,e.selectedBusinessRole=i[0].id;case 7:case"end":return t.stop()}},t,e)}))()},getBusinessRoleAuthorities:function(){var e=this;return c()(a.a.mark(function t(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getRolePrivilege({bkObjId:"biz",bkPropertyId:e.selectedBusinessRole});case 2:s=t.sent,e.isMaintainers||(e.authorities.selected=s.length?s:[]);case 4:case"end":return t.stop()}},t,e)}))()},updateAuthorities:function(){this.bindRolePrivilege({bkObjId:"biz",bkPropertyId:this.selectedBusinessRole,params:this.authorities.selected,config:{requestId:"updateAuthorities"}})}}),created:function(){this.getBusinessRoles()}},A={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"business-wrapper"},[s("div",{staticClass:"selector-wrapper clearfix"},[s("h2",{staticClass:"selector-title fl"},[e._v(e._s(e.$t('Permission["业务角色"]')))]),e._v(" "),s("div",{staticClass:"selector-container fl clearfix"},[s("bk-selector",{staticClass:"role-selector fl",attrs:{list:e.businessRoles,selected:e.selectedBusinessRole},on:{"update:selected":function(t){e.selectedBusinessRole=t}}})],1)]),e._v(" "),s("div",{staticClass:"authority-wrapper clearfix"},[s("h2",{staticClass:"authority-title fl"},[e._v(e._s(e.$t('Permission["功能选择"]')))]),e._v(" "),s("div",{staticClass:"checkbox-container clearfix"},e._l(e.authorities.list,function(t){return s("span",{staticClass:"checkbox-span fl"},[s("label",{staticClass:"bk-form-checkbox bk-checkbox-small authority-checkbox",class:{disabled:e.isMaintainers},attrs:{for:"business-authority-"+t.id,title:e.$t(t.name)}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.authorities.selected,expression:"authorities.selected"}],attrs:{type:"checkbox",id:"business-authority-"+t.id,disabled:e.isMaintainers},domProps:{value:t.id,checked:Array.isArray(e.authorities.selected)?e._i(e.authorities.selected,t.id)>-1:e.authorities.selected},on:{change:function(s){var i=e.authorities.selected,r=s.target,o=!!r.checked;if(Array.isArray(i)){var a=t.id,n=e._i(i,a);r.checked?n<0&&e.$set(e.authorities,"selected",i.concat([a])):n>-1&&e.$set(e.authorities,"selected",i.slice(0,n).concat(i.slice(n+1)))}else e.$set(e.authorities,"selected",o)}}}),e._v("\n                    "+e._s(e.$t(t.name))+"\n                ")])])}))]),e._v(" "),e.isMaintainers?e._e():s("footer",{staticClass:"footer"},[s("bk-button",{attrs:{type:"primary",loading:e.$loading("updateAuthorities")},on:{click:e.updateAuthorities}},[e._v("\n            "+e._s(e.$t("Common['保存']"))+"\n        ")])],1)])},staticRenderFns:[]};var C={data:function(){return{activeTabName:"role",groupId:""}},watch:{activeTabName:function(e){"authority"!==e&&(this.groupId="")}},methods:{skipToUser:function(e){this.activeTabName="authority",this.groupId=e},setRoles:function(){},createRole:function(){var e=this;this.activeTabName="role",this.$nextTick(function(){e.$refs.role.createRole()})}},components:{vRole:v,vAuthority:k,vBusiness:s("VU/8")(y,A,!1,function(e){s("P2j+")},"data-v-21b6de6a",null).exports}},x={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"permission-wrapper"},[s("bk-tab",{staticClass:"permission-tab",attrs:{"active-name":e.activeTabName},on:{"update:activeName":function(t){e.activeTabName=t}}},[s("bk-tabpanel",{attrs:{name:"role",title:e.$t("Permission['角色']")}},["role"===e.activeTabName?s("v-role",{ref:"role",on:{skipToUser:e.skipToUser}}):e._e()],1),e._v(" "),s("bk-tabpanel",{attrs:{name:"authority",title:e.$t("Permission['权限']")}},["authority"===e.activeTabName?s("v-authority",{attrs:{groupId:e.groupId},on:{createRole:e.createRole}}):e._e()],1),e._v(" "),s("bk-tabpanel",{attrs:{name:"business",title:e.$t("Permission['业务权限']")}},["business"===e.activeTabName?s("v-business"):e._e()],1)],1)],1)},staticRenderFns:[]};var $=s("VU/8")(C,x,!1,function(e){s("pHNl")},"data-v-09c3863a",null);t.default=$.exports},pHNl:function(e,t){},pOkE:function(e,t){}});
//# sourceMappingURL=5.e502b0b17db3981ba55e.js.map